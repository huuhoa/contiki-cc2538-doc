<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Contiki 3.x: cc2538 RF Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki 3.x
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cc2538 RF Driver<div class="ingroups"><a class="el" href="a00821.html">Contiki platforms</a> &raquo; <a class="el" href="a00822.html">TI cc2538-powered platforms</a> &raquo; <a class="el" href="a00819.html">The TI cc2538 System-on-Chip</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Driver implementation for the cc2538 RF transceiver.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:a00510"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00510.html">cc2538-rf.c</a></td></tr>
<tr class="memdesc:a00510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the cc2538 RF driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00511"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00511.html">cc2538-rf.h</a></td></tr>
<tr class="memdesc:a00511"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for the cc2538 RF driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga41315268b546d31c9e5d72b83673afac"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga41315268b546d31c9e5d72b83673afac"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#ga41315268b546d31c9e5d72b83673afac">CC2538_RF_CSP_ISRXON</a>()&#160;&#160;&#160;do { REG(<a class="el" href="a00841.html#ga40673ad35ff0b698efa9fd9d137dacd2">RFCORE_SFR_RFST</a>) = CC2538_RF_CSP_OP_ISRXON; } while(0)</td></tr>
<tr class="memdesc:ga41315268b546d31c9e5d72b83673afac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an RX ON command strobe to the CSP. <br /></td></tr>
<tr class="separator:ga41315268b546d31c9e5d72b83673afac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe92d429049995f0ae6b71391c1fb54a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabe92d429049995f0ae6b71391c1fb54a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#gabe92d429049995f0ae6b71391c1fb54a">CC2538_RF_CSP_ISTXON</a>()&#160;&#160;&#160;do { REG(<a class="el" href="a00841.html#ga40673ad35ff0b698efa9fd9d137dacd2">RFCORE_SFR_RFST</a>) = CC2538_RF_CSP_OP_ISTXON; } while(0)</td></tr>
<tr class="memdesc:gabe92d429049995f0ae6b71391c1fb54a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a TX ON command strobe to the CSP. <br /></td></tr>
<tr class="separator:gabe92d429049995f0ae6b71391c1fb54a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3415fe6302555277d48f4862886116e7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3415fe6302555277d48f4862886116e7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#ga3415fe6302555277d48f4862886116e7">CC2538_RF_CSP_ISRFOFF</a>()&#160;&#160;&#160;do { REG(<a class="el" href="a00841.html#ga40673ad35ff0b698efa9fd9d137dacd2">RFCORE_SFR_RFST</a>) = CC2538_RF_CSP_OP_ISRFOFF; } while(0)</td></tr>
<tr class="memdesc:ga3415fe6302555277d48f4862886116e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a RF OFF command strobe to the CSP. <br /></td></tr>
<tr class="separator:ga3415fe6302555277d48f4862886116e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7452cda0185edf9d134f7d300ad2dae"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab7452cda0185edf9d134f7d300ad2dae"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#gab7452cda0185edf9d134f7d300ad2dae">CC2538_RF_CSP_ISFLUSHRX</a>()</td></tr>
<tr class="memdesc:gab7452cda0185edf9d134f7d300ad2dae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the RX FIFO. <br /></td></tr>
<tr class="separator:gab7452cda0185edf9d134f7d300ad2dae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga851bdd749bb459fd781589c0d5bd6ba9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga851bdd749bb459fd781589c0d5bd6ba9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#ga851bdd749bb459fd781589c0d5bd6ba9">CC2538_RF_CSP_ISFLUSHTX</a>()</td></tr>
<tr class="memdesc:ga851bdd749bb459fd781589c0d5bd6ba9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the TX FIFO. <br /></td></tr>
<tr class="separator:ga851bdd749bb459fd781589c0d5bd6ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad9ac47af91b8dc72c6a711aaec9690a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#gad9ac47af91b8dc72c6a711aaec9690a0">PROCESS_THREAD</a> (cc2538_rf_process, ev, data)</td></tr>
<tr class="memdesc:gad9ac47af91b8dc72c6a711aaec9690a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the cc2538 RF driver process.  <a href="#gad9ac47af91b8dc72c6a711aaec9690a0">More...</a><br /></td></tr>
<tr class="separator:gad9ac47af91b8dc72c6a711aaec9690a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20bdf7e4c41f468233c9e60c6aeb2087"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#ga20bdf7e4c41f468233c9e60c6aeb2087">cc2538_rf_rx_tx_isr</a> (void)</td></tr>
<tr class="memdesc:ga20bdf7e4c41f468233c9e60c6aeb2087"><td class="mdescLeft">&#160;</td><td class="mdescRight">The cc2538 RF RX/TX ISR.  <a href="#ga20bdf7e4c41f468233c9e60c6aeb2087">More...</a><br /></td></tr>
<tr class="separator:ga20bdf7e4c41f468233c9e60c6aeb2087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad395ba39c0562f184f675d69842a9547"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#gad395ba39c0562f184f675d69842a9547">cc2538_rf_err_isr</a> (void)</td></tr>
<tr class="memdesc:gad395ba39c0562f184f675d69842a9547"><td class="mdescLeft">&#160;</td><td class="mdescRight">The cc2538 RF Error ISR.  <a href="#gad395ba39c0562f184f675d69842a9547">More...</a><br /></td></tr>
<tr class="separator:gad395ba39c0562f184f675d69842a9547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d0d5e5111dc8560d6afbe70af7fc151"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#ga0d0d5e5111dc8560d6afbe70af7fc151">cc2538_rf_set_promiscous_mode</a> (char p)</td></tr>
<tr class="memdesc:ga0d0d5e5111dc8560d6afbe70af7fc151"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn promiscous mode on or off.  <a href="#ga0d0d5e5111dc8560d6afbe70af7fc151">More...</a><br /></td></tr>
<tr class="separator:ga0d0d5e5111dc8560d6afbe70af7fc151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7cb36eadd0f05dcaaf620b1bf5bc6d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#gad7cb36eadd0f05dcaaf620b1bf5bc6d0">cc2538_rf_set_addr</a> (uint16_t pan)</td></tr>
<tr class="memdesc:gad7cb36eadd0f05dcaaf620b1bf5bc6d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets addresses and PAN identifier to the relevant RF hardware registers.  <a href="#gad7cb36eadd0f05dcaaf620b1bf5bc6d0">More...</a><br /></td></tr>
<tr class="separator:gad7cb36eadd0f05dcaaf620b1bf5bc6d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga96bae585877445cffb4b4916e3756b55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga96bae585877445cffb4b4916e3756b55"></a>
const struct <a class="el" href="a00075.html">radio_driver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#ga96bae585877445cffb4b4916e3756b55">cc2538_rf_driver</a></td></tr>
<tr class="memdesc:ga96bae585877445cffb4b4916e3756b55"><td class="mdescLeft">&#160;</td><td class="mdescRight">The NETSTACK data structure for the cc2538 RF driver. <br /></td></tr>
<tr class="separator:ga96bae585877445cffb4b4916e3756b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96bae585877445cffb4b4916e3756b55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga96bae585877445cffb4b4916e3756b55"></a>
const struct <a class="el" href="a00075.html">radio_driver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00830.html#ga96bae585877445cffb4b4916e3756b55">cc2538_rf_driver</a></td></tr>
<tr class="memdesc:ga96bae585877445cffb4b4916e3756b55"><td class="mdescLeft">&#160;</td><td class="mdescRight">The NETSTACK data structure for the cc2538 RF driver. <br /></td></tr>
<tr class="separator:ga96bae585877445cffb4b4916e3756b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver implementation for the cc2538 RF transceiver. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gad395ba39c0562f184f675d69842a9547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cc2538_rf_err_isr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The cc2538 RF Error ISR. </p>
<p>This is the interrupt service routine for all RF errors. We acknowledge every error type and instead of trying to be smart and act differently depending on error condition, we simply reset the transceiver. RX FIFO overflow is an exception, we ignore this error since read() handles it anyway.</p>
<p>However, we don't want to reset within this ISR. If the error occurs while we are reading a frame out of the FIFO, trashing the FIFO in the middle of read(), would result in further errors (RX underflows).</p>
<p>Instead, we set a flag and poll the driver process. The process will reset the transceiver without any undesirable consequences. </p>

<p>Definition at line <a class="el" href="a00510_source.html#l01024">1024</a> of file <a class="el" href="a00510_source.html">cc2538-rf.c</a>.</p>

<p>References <a class="el" href="a00487_source.html#l00371">process_poll()</a>, <a class="el" href="a00528_source.html#l00061">RFCORE_SFR_RFERRF</a>, and <a class="el" href="a00528_source.html#l00140">RFCORE_SFR_RFERRF_RXOVERF</a>.</p>

</div>
</div>
<a class="anchor" id="ga20bdf7e4c41f468233c9e60c6aeb2087"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cc2538_rf_rx_tx_isr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The cc2538 RF RX/TX ISR. </p>
<p>This is the interrupt service routine for all RF interrupts relating to RX and TX. Error conditions are handled by <a class="el" href="a00830.html#gad395ba39c0562f184f675d69842a9547" title="The cc2538 RF Error ISR. ">cc2538_rf_err_isr()</a>. Currently, we only acknowledge the FIFOP interrupt source. </p>

<p>Definition at line <a class="el" href="a00510_source.html#l00995">995</a> of file <a class="el" href="a00510_source.html">cc2538-rf.c</a>.</p>

<p>References <a class="el" href="a00487_source.html#l00371">process_poll()</a>, and <a class="el" href="a00528_source.html#l00063">RFCORE_SFR_RFIRQF0</a>.</p>

</div>
</div>
<a class="anchor" id="gad7cb36eadd0f05dcaaf620b1bf5bc6d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cc2538_rf_set_addr </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets addresses and PAN identifier to the relevant RF hardware registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pan</td><td>The PAN Identifier</td></tr>
  </table>
  </dd>
</dl>
<p>Values for short and extended addresses are not needed as parameters since they exist in the linkaddr buffer in the contiki core. They are thus simply copied over from there. </p>

</div>
</div>
<a class="anchor" id="ga0d0d5e5111dc8560d6afbe70af7fc151"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cc2538_rf_set_promiscous_mode </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn promiscous mode on or off. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>If promiscous mode should be on (1) or off (0)</td></tr>
  </table>
  </dd>
</dl>
<p>This function turns promiscous mode on or off. In promiscous mode, every received frame is returned from the RF core. In non-promiscous mode, only broadcast frames or frames with our address as the receive address are returned from the RF core. </p>

<p>Definition at line <a class="el" href="a00510_source.html#l01043">1043</a> of file <a class="el" href="a00510_source.html">cc2538-rf.c</a>.</p>

</div>
</div>
<a class="anchor" id="gad9ac47af91b8dc72c6a711aaec9690a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROCESS_THREAD </td>
          <td>(</td>
          <td class="paramtype">cc2538_rf_process&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ev&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">data&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implementation of the cc2538 RF driver process. </p>
<p>This process is started by init(). It simply sits there waiting for an event. Upon frame reception, the RX ISR will poll this process. Subsequently, the contiki core will generate an event which will call this process so that the received frame can be picked up from the RF RX FIFO </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="a00013.html#a3">example-announcement.c</a>, <a class="el" href="a00015.html#a3">example-broadcast.c</a>, <a class="el" href="a00017.html#a3">example-collect.c</a>, <a class="el" href="a00019.html#a9">example-mesh.c</a>, <a class="el" href="a00021.html#a16">example-multihop.c</a>, <a class="el" href="a00005.html#a1">example-pollhandler.c</a>, <a class="el" href="a00003.html#a3">example-program.c</a>, <a class="el" href="a00009.html#a10">example-psock-server.c</a>, <a class="el" href="a00023.html#a3">example-rucb.c</a>, <a class="el" href="a00025.html#a14">example-rudolph1.c</a>, <a class="el" href="a00027.html#a12">example-rudolph2.c</a>, <a class="el" href="a00029.html#a9">example-runicast.c</a>, <a class="el" href="a00031.html#a3">example-trickle.c</a>, <a class="el" href="a00033.html#a1">example-unicast.c</a>, and <a class="el" href="a00011.html#a3">multi-threading.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="a00510_source.html#l00947">947</a> of file <a class="el" href="a00510_source.html">cc2538-rf.c</a>.</p>

<p>References <a class="el" href="a00161_source.html#l00255">radio_driver::off</a>, <a class="el" href="a00161_source.html#l00252">radio_driver::on</a>, <a class="el" href="a00382_source.html#l00077">packetbuf_clear()</a>, <a class="el" href="a00382_source.html#l00204">packetbuf_dataptr()</a>, <a class="el" href="a00382_source.html#l00197">packetbuf_set_datalen()</a>, <a class="el" href="a00383_source.html#l00065">PACKETBUF_SIZE</a>, <a class="el" href="a00488_source.html#l00120">PROCESS_BEGIN</a>, <a class="el" href="a00488_source.html#l00131">PROCESS_END</a>, <a class="el" href="a00488_source.html#l00178">PROCESS_YIELD_UNTIL</a>, <a class="el" href="a00161_source.html#l00239">radio_driver::read</a>, and <a class="el" href="a00529_source.html#l00062">RFCORE_XREG_FSMSTAT0</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 27 2015 01:15:58 for Contiki 3.x by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
